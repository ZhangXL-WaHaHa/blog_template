---
title: 性能优化
categories: 
 - applet
date: 2021-05-14
---
## 前言
接触小程序开发已经1年多了吧，下面的这篇文章就总结一下这一年多来接触到的小程序性能优化策略。

## 优化的方面
对于我这种资深的老百度，老google玩家，对于小程序性能可以优化的方面，结合众网友的回答，总结成以下几个方面:
1. 加载消耗
2. 渲染消耗
3. 网络（后端的事）

## 检测工具
除了我们认为感知性能的变化之外，我们还可以利用小程序的性能监控面板功能,「右上角三个点的胶囊按钮」 -> 「开发调试」 -> 「打开性能监控面板」。ps: 该功能仅能用于小程序开发版本.

同样的，我们还可以利用微信开发者工具提供的Audits功能, 「调试器」 -> 「选择Audits」 -> 「点击下方的运行按钮」。
运行结果包含4个模块（总分，性能，体验，最佳实践）。在这里，我就不详细介绍该功能其他模块的评分标准，点击[传送门](https://developers.weixin.qq.com/miniprogram/dev/framework/audits/scoring.html)查看更多详细介绍
:::tip
关于性能评判标准，官方设置了12点规则，分别为（括弧里的数字为规则所代表的的权重）:
脚本执行时间（7） > 首屏时间（6）> 渲染时间（6）> setData调用频率（6）> setData数据大小（6）> WXML节点数据（6）
请求耗时（5）> 网络请求数（5）> 图片缓存（4）> 图片大小（4）> 网络请求缓存（2）
:::
>权重为0的规则，表示该规则不参与评分，仅作为提示项。开发者可在开发者工具中可以点击“忽略”。
>各规则的得分条件也可能会随小程序的版本更新有一定的调整。

是不是看一眼规则，就感觉明白了自己的优化思路了?

## 具体的优化方法 PS: 本人才疏学浅，可能知道的优化方法并不完全，欢迎指出bug！！
### 加载消耗
1. 小程序的打开时间
小程序的打开时间是指我们点击打开小程序到我们看到小程序内容的时间，这种一般跟小程序的代码包体积有关（抛开网络问题）。一般来说，优化这一指标，最简单，最核心的做法
就是减少代码包的体积。怎么减少，众网友们给出的答案基本上都是一致：优化代码，减少图片以及分包策略。
```js
优化代码: 尽量减少重复代码的出现，这种优化可能不怎么见效，因为代码的的体积本身并不大
减少图片，尽量避免大图片: 图片的大小尽量控制在不超过100k(没有标准），这个平时在开发的时候，应该很少会有大图片的使用，如果有的话，可以考虑将图片放到服务器上 
```

2. 首屏加载时间
首屏加载时间是指小程序打开之后到首页加载出数据所经历的时间，在这段时间里，就会出现所谓的‘白屏’。如何减少首屏加载产生的白屏时间